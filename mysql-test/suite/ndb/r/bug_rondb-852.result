SHOW VARIABLES LIKE 'log_bin';
Variable_name	Value
log_bin	ON
SHOW VARIABLES LIKE 'ndb_log_bin';
Variable_name	Value
ndb_log_bin	ON
CREATE LOGFILE GROUP lg_1
ADD UNDOFILE 'undo_1.log'
    INITIAL_SIZE 16M
UNDO_BUFFER_SIZE 2M
ENGINE NDBCLUSTER;
CREATE TABLESPACE ts_1
ADD DATAFILE 'data_1.dat'
    USE LOGFILE GROUP lg_1
INITIAL_SIZE 32M
ENGINE NDBCLUSTER;
CREATE TABLE t1 (
col_a int NOT NULL,
col_b varchar(16383) NOT NULL STORAGE DISK STORAGE DISK,
PRIMARY KEY(col_a)
) ENGINE=ndbcluster CHARSET=latin1 TABLESPACE ts_1 STORAGE DISK PARTITION BY KEY(col_a) PARTITIONS 1;
INSERT INTO t1 VALUES (1, REPEAT('a', 8192));
INSERT INTO t1 VALUES (2, REPEAT('a', 8192));
INSERT INTO t1 VALUES (3, REPEAT('a', 6));
UPDATE t1 SET col_b = REPEAT('a', 16380) WHERE col_a = 3;
DROP TABLE t1;
CREATE TABLE t1 (
col_a int NOT NULL,
col_b varchar(16383) NOT NULL STORAGE DISK STORAGE DISK,
PRIMARY KEY(col_a)
) ENGINE=ndbcluster CHARSET=latin1 TABLESPACE ts_1 STORAGE DISK PARTITION BY KEY(col_a) PARTITIONS 1;
INSERT INTO t1 VALUES (1, REPEAT('a', 8192));
INSERT INTO t1 VALUES (2, REPEAT('a', 8192));
INSERT INTO t1 VALUES (3, REPEAT('a', 6));
BEGIN;
UPDATE t1 SET col_b = REPEAT('a', 16380) WHERE col_a = 3;
UPDATE t1 SET col_b = REPEAT('b', 16380) WHERE col_a = 3;
DELETE FROM t1 WHERE col_a = 3;
COMMIT;
DROP TABLE t1;
CREATE TABLE t1 (
col_a int NOT NULL,
col_b varchar(16383) NOT NULL STORAGE DISK STORAGE DISK,
PRIMARY KEY(col_a)
) ENGINE=ndbcluster CHARSET=latin1 TABLESPACE ts_1 STORAGE DISK PARTITION BY KEY(col_a) PARTITIONS 1;
INSERT INTO t1 VALUES (1, REPEAT('a', 8192));
INSERT INTO t1 VALUES (2, REPEAT('a', 8192));
INSERT INTO t1 VALUES (3, REPEAT('a', 6));
BEGIN;
UPDATE t1 SET col_b = REPEAT('a', 64) WHERE col_a = 3;
UPDATE t1 SET col_b = REPEAT('a', 128) WHERE col_a = 3;
UPDATE t1 SET col_b = REPEAT('a', 1024) WHERE col_a = 3;
UPDATE t1 SET col_b = REPEAT('b', 4096) WHERE col_a = 3;
UPDATE t1 SET col_b = REPEAT('b', 8192) WHERE col_a = 3;
UPDATE t1 SET col_b = REPEAT('c', 16380) WHERE col_a = 3;
UPDATE t1 SET col_b = REPEAT('d', 16380) WHERE col_a = 3;
DELETE FROM t1 WHERE col_a = 3;
COMMIT;
DROP TABLE t1;
CREATE TABLE t1 (
col_a int NOT NULL,
col_b varchar(16383) NOT NULL STORAGE DISK STORAGE DISK,
PRIMARY KEY(col_a)
) ENGINE=ndbcluster CHARSET=latin1 TABLESPACE ts_1 STORAGE DISK PARTITION BY KEY(col_a) PARTITIONS 1;
INSERT INTO t1 VALUES (1, REPEAT('a', 8192));
INSERT INTO t1 VALUES (2, REPEAT('a', 8192));
BEGIN;
INSERT INTO t1 VALUES (3, REPEAT('a', 6));
UPDATE t1 SET col_b = REPEAT('a', 64) WHERE col_a = 3;
UPDATE t1 SET col_b = REPEAT('a', 128) WHERE col_a = 3;
UPDATE t1 SET col_b = REPEAT('a', 1024) WHERE col_a = 3;
UPDATE t1 SET col_b = REPEAT('b', 4096) WHERE col_a = 3;
UPDATE t1 SET col_b = REPEAT('b', 8192) WHERE col_a = 3;
UPDATE t1 SET col_b = REPEAT('c', 16380) WHERE col_a = 3;
UPDATE t1 SET col_b = REPEAT('d', 16380) WHERE col_a = 3;
DELETE FROM t1 WHERE col_a = 3;
COMMIT;
DROP TABLE t1;
ALTER TABLESPACE ts_1 DROP DATAFILE 'data_1.dat';
DROP TABLESPACE ts_1;
DROP LOGFILE GROUP lg_1 ENGINE NDBCLUSTER;
